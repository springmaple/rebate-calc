<!DOCTYPE html>
<html>

<head>
  <title>Member</title>
  <link rel="stylesheet" href="../css/bootstrap.css">
  <link rel="stylesheet" href="../css/bootstrap-theme.css">
  <link rel="stylesheet" href="../css/mbr-rebate.css">

  <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
  <script src="../js/jquery-3.1.0.js"></script>
  <script src="../js/boostrap.js"></script>
  <script>if (window.module) module = window.module;</script>
  <script>
    const {getParamByName} = require('./../../lib/util.js')
    const {ipcRenderer} = require('electron')
    const _id = getParamByName('_id', window.location.href)
    const map = {
      mbrName: 'mbr-name',
      mbrEmail: 'mbr-email',
      mbrBankName: 'mbr-bank-name',
      mbrBankAcc: 'mbr-bank-acc',
      mbrPackage: 'mbr-package'
    }

    ipcRenderer.on('get-mbr', (evt, mbr) => {
      for (key in map)
        $(`#${map[key]}`).html(mbr[key])
    })

    window.onload = function () {
      ipcRenderer.send('get-mbr', _id)
    }
  </script>

</head>

<body>
  <div id="mbr-navibar">
    <script>
      $('#mbr-navibar').html(`
        <ul class="nav nav-tabs nav-justified">
          <li><a href="mbr-info.html?_id=${_id}">Info</a></li>
          <li class="active"><a href="">Calculator</a></li>
        </ul>`)
    </script>
  </div>

  <form class="form-horizontal">
    <div class="form-group">
      <label class="control-label col-sm-2" for="mbr-name-box">Name:</label>
      <div class="col-sm-10" id="mbr-name-box">
        <div class="form-control no-input-box" id="mbr-name"><!-- INSERT MBR NAME --></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="mbr-email-box">Email:</label>
      <div class="col-sm-10" id="mbr-email-box">
        <div class="form-control no-input-box" id="mbr-email"><!-- INSERT MBR EMAIL --></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="mbr-bank-name-box">Bank Name:</label>
      <div class="col-sm-10" id="mbr-bank-name-box">
        <div class="form-control no-input-box" id="mbr-bank-name"><!-- INSERT MBR BANK NAME --></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="mbr-bank-acc-box">Bank Acc:</label>
      <div class="col-sm-10" id="mbr-bank-acc-box">
        <div class="form-control no-input-box" id="mbr-bank-acc"><!-- INSERT MBR BANK ACC --></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="mbr-package-box">Package:</label>
      <div class="col-sm-10" id="mbr-package-box">
        <div class="form-control no-input-box" id="mbr-package-box"><!-- INSERT MBR PACKAGE --></div>
      </div>
    </div>
  </form>

  <div id="rebate-panels"><!-- INSERT 3 PANELS --></div>
  <script>
    let rebatePanels = $('#rebate-panels')
    for (let i=3; i>=1; i--) {
      let rebatePanelHeadId = `rebate-panel-head-${i}`
      let rebatePanelBodyId = `rebate-panel-body-${i}`
      rebatePanels.append(`
        <div class="panel panel-default">
          <div class="panel-heading rebate-panel-head" id="${rebatePanelHeadId}">
            <h3 class="panel-title">${i}%</h3>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-9 rebate-panel-body-col no-wrap" id="${rebatePanelBodyId}">
                <!-- INSERT MBR-LS HERE -->
              </div>
              <div class="col-md-3 rebate-panel-body-col">
                <table class="table table-bordered rebate-panel-subtotal">
                  <thead>
                    <tr>
                      <th><span>10</span><span class="badge">30</span></th>
                      <th><span>20</span><span class="badge">12</span></th>
                      <th><span>30</span><span class="badge"></span></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>3000.00</td>
                      <td>3000.00</td>
                      <td>3000.00</td>
                    </tr>
                    <tr>
                      <td>30000.00</td>
                      <td>30000.00</td>
                      <td>30000.00</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>`)
      $(`#${rebatePanelHeadId}`).dblclick(rebatePanelBodyId, function(evt) {
        $(`#${evt.data}`).toggleClass('wrap no-wrap')
      })
    }

    for (let i=3; i>=1; i--) {
      let cnts = ''
      for (let j = 0; j < 30; j++)
        cnts += `
          <li>
            <ul class="list-group">

              <li class="list-group-item">
                <div class="btn-group" data-toggle="buttons">
                  <label class="btn btn-default active">
                    <input type="radio" name="options" id="option1" checked>10
                  </label>
                  <label class="btn btn-default">
                    <input type="radio" name="options" id="option2">20
                  </label>
                  <label class="btn btn-default">
                    <input type="radio" name="options" id="option3">30
                  </label>
                </div>
              </li>

              <li class="list-group-item">
                <input class="cnt-input" placeholder="Name">
              </li>

              <li class="list-group-item">
                <input class="cnt-input" placeholder="Package" type="number">
              </li>
            </ul>
          </li>`
      $(`#rebate-panel-body-${i}`).html(`<ul class="cnt-ul">${cnts}</ul>`)
    }
  </script>

</body>

</html>